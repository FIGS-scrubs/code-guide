<div class="heading" id="coffee">
  <h2>CoffeeScript</h2>
</div>

<div class="section" id="coffee-code-layout">
  <div class="col">
    <h3>Code layout</h3>
    <ul>
      <li>Use spaces only, with <strong>4 spaces</strong> per indentation level. Never mix tabs and spaces.</li>
      <li>Try your best to limit all lines to a maximum of 79 characters. Do not ever go over 120.</li>
    </ul>

    <h4>Blank lines</h4>
    <ul>
      <li>Separate top-level function and class definitions with a single blank line.</li>
      <li>Separate method definitions inside of a class with a single blank line.</li>
      <li>Use a single blank line within the bodies of methods or functions in cases where this improves readability (e.g., for the purpose of delineating logical sections).</li>
    </ul>

    <h4>Trailing Whitespace</h4>
    <ul>
      <li>Do not include trailing whitespace on any lines.</li>
    </ul>

    <h4>Encoding</h4>
    <ul>
      <li>UTF-8 is the only source file encoding.</li>
    </ul>
  </div>
</div>

<div class="section" id="coffee-imports">
  <div class="col">
    <h3>Module Imports</h3>

    <p>If using a module system (CommonJS Modules, AMD, etc.), require statements should be placed on separate lines at the top of the file.</p>

    <p>These statements should be grouped in the following order:</p>

    <ol>
      <li>Standard library imports <em>(if a standard library exists)</em></li>
      <li>Third party library imports</li>
      <li>Local imports <em>(imports specific to this application or library)</em></li>
    </ol>
  </div>

  <div class="col">
    {% highlight coffee %}{% include coffee/imports.coffee %}{% endhighlight %}
  </div>
</div>

<div class="section" id="coffee-whitespace">
  <div class="col">
    <h3>Whitespace in Expressions and Statements</h3>

    <p>Avoid extraneous whitespace in the following situations:</p>

    <ul>
      <li>Immediately inside parentheses, brackets or braces</li>
      <li>Immediately before a comma</li>
    </ul>

    <p>Additional recommendations::</p>

    <ul>
      <li>Always surround these binary operators with a single space on either side
        <ul>
          <li>assignment: <code>=</code></li>
          <li>augmented assignment: <code>+=</code>, <code>-=</code>, etc.</li>
          <li>comparisons: <code>==</code>, <code><</code>, <code>></code>, <code><=</code>, <code>>=</code>, <code>unless</code>, etc.</li>
          <li>arithmetic operators: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, etc.</li>
          <li><em>(Do not use more than one space around these operators)</em></li>
        </ul>
      </li>
    </ul>
  </div>

  <div class="col">
    {% highlight coffee %}{% include coffee/whitespace.coffee %}{% endhighlight %}
  </div>
</div>

<div class="section" id="coffee-comments">
  <div class="col">
    <h3>Comments</h3>

    <p>If modifying code that is described by an existing comment, update the comment such that it accurately reflects the new code. (If possible, improve the code to be clear and concise, and delete the comment entirely.)</p>

    <p>The first word of the comment should be capitalized, unless the first word is an identifier that begins with a lower-case letter.</p>

    <p>If a comment is short, the period at the end can be omitted.</p>

    <h4>Block Comments</h4>

    <ul>
      <li>Block comments apply to the block of code that follows them.</li>
      <li>Each line of a block comment starts with a <code>#</code> and a single space, and should be indented at the same level of the code that it describes.</li>
      <li>Paragraphs inside of block comments are separated by a line containing a single <code>#</code>.</li>
      <li>Use Markdown in your block comments, if applicable.</li>
    </ul>

    <h4>Inline Comments</h4>

    <ul>
      <li>Inline comments are placed on the line immediately above the statement that they are describing. If the inline comment is sufficiently short, it can be placed on the same line as the statement (separated by a single space from the end of the statement).</li>
      <li>All inline comments should start with a <code>#</code> and a single space.</li>
      <li>Do not use inline comments when they state the obvious. Only include them when they can be useful to the developer reading them.</li>
    </ul>

  </div>

  <div class="col">
    {% highlight coffee %}{% include coffee/comments.coffee %}{% endhighlight %}
  </div>
</div>

<div class="section" id="coffee-naming">
  <div class="col">
    <h3>Naming Conventions</h3>

    <p>Use <code>camelCase</code> (with a leading lowercase character) to name all variables, methods, and object properties.</p>

    <p>Use <code>UpperCamelCase</code> (with a leading uppercase character) to name all classes.</p>

    <p><em>(The <strong>official</strong> CoffeeScript convention is camelCase, because this simplifies interoperability with JavaScript. For more on this decision, see [here][coffeescript-issue-425].)</em></p>

    <p>Methods and variables that are intended to be "private" should begin with a leading underscore.</p>

  </div>

  <div class="col">
    {% highlight coffee %}{% include coffee/naming.coffee %}{% endhighlight %}
  </div>
</div>

<div class="section" id="coffee-functions">
  <div class="col">
    <h3>Functions</h3>

    <p><em>(These guidelines also apply to the methods of a class.)</em></p>

    <ul>
      <li>When declaring a function that takes arguments, always use a single space after the closing parenthesis of the arguments list</li>
      <li>Do not use parentheses when declaring functions that take no arguments</li>
      <li>In cases where method calls are being chained and the code does not fit on a single line, each call should be placed on a separate line and indented by one level (i.e., two spaces), with a leading <code>.</code></li>
      <li>Most importantly, be consistent</li>
    </ul>

  </div>

  <div class="col">
    {% highlight coffee %}{% include coffee/functions.coffee %}{% endhighlight %}
  </div>
</div>

<div class="section" id="coffee-strings">
  <div class="col">
    <h3>Strings</h3>

    <ul>
      <li>Use string interpolation instead of string concatenation</li>
      <li>Prefer double quoted strings (<code>""</code>) instead of single quoted (<code>''</code>) strings</li>
    </ul>

  </div>

  <div class="col">
    {% highlight coffee %}{% include coffee/strings.coffee %}{% endhighlight %}
  </div>
</div>

<div class="section" id="coffee-conditionals">
  <div class="col">
    <h3>Conditionals</h3>

    <ul>
      <li>Favour <code>unless</code> over <code>if</code> for negative conditions, especially for trailing conditions</li>
      <li>Instead of using <code>unless...else</code>, use <code>if...else</code></li>
      <li>Multi-line if/else clauses should use indentation</li>
    </ul>

  </div>

  <div class="col">
    {% highlight coffee %}{% include coffee/conditionals.coffee %}{% endhighlight %}
  </div>
</div>

<div class="section" id="coffee-looping">
  <div class="col">
    <h3>Looping and Comprehensions</h3>

    <ul>
      <li>Take advantage of comprehensions whenever possible</li>
    </ul>

  </div>

  <div class="col">
    {% highlight coffee %}{% include coffee/looping.coffee %}{% endhighlight %}
  </div>
</div>

<div class="section" id="coffee-annotations">
  <div class="col">
    <h3>Annotations</h3>

    <ul>
      <li>Use annotations when necessary to describe a specific action that must be taken against the indicated block of code</li>
      <li>Write the annotation on the line immediately above the code that the annotation is describing.</li>
      <li>The annotation keyword should be followed by a colon and a space, and a descriptive note.</li>
    </ul>

    <p>Annotation types:</p>

    <ul>
      <li><code>TODO</code>: describe missing functionality that should be added at a later date</li>
      <li><code>FIXME</code>: describe broken code that must be fixed</li>
      <li><code>OPTIMIZE</code>: describe code that is inefficient and may become a bottleneck</li>
      <li><code>HACK</code>: describe the use of a questionable (or ingenious) coding practice</li>
      <li><code>REVIEW</code>: describe code that should be reviewed to confirm implementation</li>
    </ul>

    <p>If a custom annotation is required, the annotation should be documented in the project's README.</p>

  </div>

  <div class="col">
    {% highlight coffee %}{% include coffee/annotations.coffee %}{% endhighlight %}
  </div>
</div>

<div class="section" id="coffee-miscellaneous">
  <div class="col">
    <h3>Miscellaneous</h3>

    <ul>
      <li>Prefer shorthand notation (::) for accessing an object's prototype</li>
      <li>Prefer <code>@property</code> over <code>this.property</code></li>
      <li>However, avoid the use of <strong>standalone</strong> <code>@</code></li>
      <li>Avoid <code>return</code> where not required, unless the explicit return increases clarity</li>
      <li>Use splats (<code>...</code>) when working with functions that accept variable numbers of arguments</li>
    </ul>

  </div>

  <div class="col">
    {% highlight coffee %}{% include coffee/miscellaneous.coffee %}{% endhighlight %}
  </div>
</div>
